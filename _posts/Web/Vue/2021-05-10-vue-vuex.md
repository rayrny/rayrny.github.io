---
layout: posts
title: "[Vue 3] Vuexë€?"
categories:
  - Vue
last_modified_at: 2021-05-10
author_profile: true
tags:
  - ì›¹ í”„ë ˆì„ì›Œí¬
  - vue
  - vuex
toc: true
toc_sticky: true
sidebar:
  title: Posts
  nav: "sidebar-contents"
---

## Vue.jsì˜ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬, Vuexë¥¼ ì‚¬ìš©í•´ë³´ì!



vuexëŠ” ê°„ë‹¨í•˜ê²Œ ì €ì¥ì†Œë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. ìƒíƒœë¥¼ ì €ì¥í•˜ê³  ì´ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ì¼ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìœ¼ë©°, ì»´í¬ë„ŒíŠ¸ê°„ì˜ ë°ì´í„° ì „ë‹¬ì„ ê´€ë¦¬í•œë‹¤ê³  ë³´ë©´ ë˜ê² ë‹¤.



### â›³ ì„¤ì¹˜ ë° ê¸°ë³¸ í™˜ê²½ ì„¤ì •

-----

veuxëŠ” ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì„¤ì¹˜ ê°€ëŠ¥í•˜ë‹¤. (ë²„ì „ í™•ì¸ì€ package.jasonì—ì„œ ê°€ëŠ¥)
```
npm install vuex
```

ì„¤ì¹˜í•œ í›„ ```í”„ë¡œì íŠ¸/src```í•˜ìœ„ ê²½ë¡œì— **store í´ë”ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì•ˆì— index.jsë¥¼ ë§Œë“¤ì–´ì£¼ì.**

```
// í´ë”êµ¬ì¡°
src
â”œâ”€â”€ store
â”‚   â””â”€â”€ index.js
â”œâ”€â”€ components
â”œâ”€â”€ views
â”œâ”€â”€ App.vue
â””â”€â”€ main.js
```


### ğŸ“ main.jsì— store ë“±ë¡í•˜ê¸°

-----

ì´ì œ main.jsì—ì„œ storeë¥¼ importí•œ ë’¤ì— ```use(store)``` í•´ì£¼ì. (vue3 ë²„ì „)

``` javascript
// main.js
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import { store } from "./store"; // store ë“±ë¡!

createApp(App).use(router, store).mount('#app')
```

### ğŸŸ ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ vuexì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì!

-----

**vue3 ë²„ì „ì€ vuex 4ë²„ì „ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤!** <a href="https://rayrny.github.io/vue/vue-vuex-ver4/">'Vuex' is not defined ì˜¤ë¥˜</a> í¬ìŠ¤íŒ… ì°¸ê³ 

~~ì´ìœ ëŠ” ëª¨ë¥´ê² ëŠ”ë° ```export default new Veux.Store({})```ë¡œ ì ìœ¼ë©´ ```'Vuex' is not defined```ë¼ëŠ” ì—ëŸ¬ê°€ ëœ¬ë‹¤.. ì•„ë¬´ë¦¬ ì°¾ì•„ë„ ì›ì¸ì€ ì•ˆë‚˜ì˜¤ê³ , stackoverflowì— ë‹¬ë¦° ë‹µê¸€ ì¤‘ í•˜ë‚˜ëŠ” ```export const store = new Vuex.Store({})```ë¥¼ ì‚¬ìš©í•´ë³´ë¼ëŠ” ê²ƒì´ì—ˆëŠ”ë°, ì´ëŸ¬ë©´ ì˜¤ë¥˜ëŠ” ì•ˆëœ¬ë‹¤. ğŸ¤”~~

#### ì°¸ê³ ë¡œ, vuex 3ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš© ê°€ëŠ¥
```javascript
// store/index.js
import Vue from "vue"
import Vuex from "vuex"
import axios from "axios"

Vue.use(Vuex);

export default new Veux.Store({ })
```
-----

#### vuex 4ë¶€í„´ ì´ë ‡ê²Œ!

```export const store = createStore()```ì„ í†µí•´ ì‚¬ìš©í•´ì•¼í•œë‹¤.

```javascript
// store/index.js
import { createStore } from 'vuex'
import axios from 'axios'
// ë¼ìš°í„°ë‘ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ export
export const store = createStore ({
  state: {
  },
  getters: {
  },
  mutations: {
  },
  actions: {
  },
})
```

Vuexì˜ í•µì‹¬ ì»¨ì…‰ì€ ìœ„ì— ë‚˜ì™€ìˆëŠ” 4ê°€ì§€, **state(ìƒíƒœ), getters, mutations(ë³€ì´), actions(ì•¡ì…˜)**ì´ë‹¤. *ì˜ˆì œ ì½”ë“œëŠ” ë¡œê·¸ì¸ì„ ìœ„í•´ ì‘ì„±í–ˆë˜ ì½”ë“œë¥¼ ì²¨ë¶€í–ˆë‹¤.


#### state
ë¨¼ì € **stateì—ëŠ” ì•±ì˜ ìƒíƒœ**ê°€ ë“¤ì–´ê°„ë‹¤. ë¡œê·¸ì¸ì„ ì˜ˆì‹œë¡œ ë“¤ë©´, ```accessToken```ì´ í•˜ë‚˜ì˜ ìƒíƒœì´ë©°, ì´ ê°’ì€ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ì„ í•˜ëŠ” ë™ì•ˆ ì•„ì´ë””ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³  ì„œë²„ì—ì„œ í† í°ì„ ë„˜ê²¨ì¤Œì— ë”°ë¼ ìƒíƒœê°€ ë³€í•œë‹¤. Vue ì»´í¬ë„ŒíŠ¸ì—ì„œì˜ ì ‘ê·¼ì€ ```this.$store.state.accessToken```ê³¼ ê°™ì´ í•  ìˆ˜ ìˆë‹¤.


#### getters
ë‹¤ìŒìœ¼ë¡œ **gettersëŠ” stateë¥¼ ê³„ì‚°**í•  ìˆ˜ ìˆë‹¤. ì²« ë²ˆì§¸ ì¸ìë¡œ stateë¥¼ ë°›ê³  ë‘ ë²ˆì§¸ ì¸ìë¡œëŠ” ë‹¤ë¥¸ gettersë„ ë°›ì„ ìˆ˜ë„ ìˆë‹¤. ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ```this.$store.getters.ì§€ì •í•œ í•¨ìˆ˜ ì´ë¦„```ì„ í†µí•´ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.

#### mutation
ì–´ì©Œë©´ ê°€ì¥ ì¤‘ìš”í•œ, **muatation(ë³€ì´)ì€ ì‹¤ì œë¡œ ìƒíƒœë¥¼ ë³€ê²½**í•œë‹¤. vuex ì €ì¥ì†Œì˜ stateë¥¼ ë³€ê²½í•˜ëŠ” ë³€ì´ëŠ” ì´ë²¤íŠ¸ì™€ ìœ ì‚¬í•˜ë‹¤. ê° ë³€ì´ì—ëŠ” í•¸ë“¤ëŸ¬ê°€ ì¡´ì¬í•˜ê³ , ì´ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ê°€ ìƒíƒœë¥¼ ìˆ˜ì •í•œë‹¤. í•¸ë“¤ëŸ¬ í•¨ìˆ˜ëŠ” ì²« ë²ˆì§¸ ì¸ìë¡œ stateë¥¼ ë°›ëŠ”ë‹¤. ë˜í•œ ì¶”ê°€ ì¸ìë¡œ payloadë¼ê³  í•˜ëŠ” store.commitì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```javascript
// store/index.js
  mutations: {
    LOGIN(state, { accessToken }) {
      // { accessToken }ì€ ì„œë²„ì—ì„œ ë„˜ê²¨ì£¼ëŠ” ê°’
      state.accessToken = { accessToken }
    },

    LOGOUT(state) {
      // ë¡œê·¸ì•„ì›ƒ ì‹œì—ëŠ” í† í°ì„ nullë¡œ ì´ˆê¸°í™”í•´ì¤€ë‹¤.
      state.accessToken = null
    },
  },
```

ì¤‘ìš”í•œ ì ì€ mutationì˜ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ëŠ” ë¬´ì¡°ê±´ ë™ê¸°ì ì´ë¼ëŠ” ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ë³€ì´ì™€ ì•¡ì…˜ì˜ ì°¨ì´ì ì´ ìƒê¸´ë‹¤.

#### action
ë§ˆì§€ë§‰ìœ¼ë¡œ actionì€ mutationì´ë‘ ë¹„ìŠ·í•˜ì§€ë§Œ, **ìƒíƒœë¥¼ ë³€ì´ì‹œí‚¤ëŠ”ê²Œ ì•„ë‹ˆê³  ì•¡ì…˜ìœ¼ë¡œ ë³€ì´ì— ëŒ€í•œ ì»¤ë°‹**ì„ í•œë‹¤. ë˜í•œ ì•ì„œ ë§í–ˆë“¯ì´ ë¹„ë™ê¸° ì‘ì—…ì´ ê°€ëŠ¥í•˜ë‹¤. ì¸ìë¡œëŠ” í•¨ìˆ˜ì™€ ì†ì„± ì„¸íŠ¸ë¥¼ ê°€ì§„ context ê°ì²´ë¥¼ ë°›ìœ¼ë©°, ```context.commit```ì´ë‚˜ ```context.getters```ë¥¼ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. ì´ë•Œ, commitì„ ì—¬ëŸ¬ë²ˆ í˜¸ì¶œí•´ì•¼ í•˜ëŠ” ê²½ìš° ë“±ì—ì„œ ì½”ë“œ ë‹¨ìˆœí™”ë¥¼ ìœ„í•´ ì „ë‹¬ì¸ì ë¶„í•´ë¥¼ ì‚¬ìš©í•œë‹¤. (commit ê°™ì€ ê²½ìš°, { commit })

ì•¡ì…˜ì€ ì»´í¬ë„ŒíŠ¸ì—ì„œ ```this.$store.dipatch("LOGIN", { user_id, user_pw })```ìœ¼ë¡œ í˜¸ì¶œëœë‹¤.

Q. ê·¸ëƒ¥ store.commit('LOGIN')í•˜ë©´ ì•ˆë˜ë‚˜ìš”?

A. ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•¨ì´ë©°, store.commit()ì„ ì§ì ‘ í˜¸ì¶œí•œë‹¤ë©´ ë™ê¸°ì ìœ¼ë¡œ ìƒíƒœê°€ ë³€ì´ëœë‹¤.

ì •ë¦¬: ì•¡ì…˜ì—ì„œ ë¹„ë™ê¸°ì ìœ¼ë¡œ í•„ìš”í•œ ì¼ë“¤ì„ ì­‰ ìˆ˜í–‰ -> ì´í›„ ìƒíƒœë³€ì´ë¥¼ ë§ˆì§€ë§‰ì— ê¸°ë¡

```javascript
// store/index.js
actions: {
    LOGIN({ commit }, { user_id, user_pw }) {
      return axios
        .post('/api/auth/login', { user_id, user_pw })
        .then(({ data }) => commit("LOGIN", data))
    },
    LOGOUT({ commit }) {
      commit("LOGOUT")
    },
  },
```

ì´ì™¸ì—ë„ ëª¨ë“ˆì„ í†µí•´ ì €ì¥ì†Œë¥¼ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤. ìì„¸í•œê±´ <a href="https://vuex.vuejs.org/kr/guide/modules.html">ê³µì‹ë¬¸ì„œ</a>ë¥¼ ì°¸ê³ í•˜ì.
